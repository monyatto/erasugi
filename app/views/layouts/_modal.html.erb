<%= turbo_frame_tag "modal" do %>
  <div data-controller='modal' data-modal-modal-id-value="new">
    <dialog id="new" class="modal">
      <div class="modal-box">
        <form method="dialog">
          <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
        </form>
        <div data-controller="form-character-count" >
          <%= form_with(model: @post, data: { turbo_action: 'replace' }) do |form| %>
            <div>
              <%= form.label :content, style: "display: block" %>
              <%= form.text_area :content %>
              <p id="text-length"><%="残り#{140 - (@post.content&.length || 0)}文字入力できます" %></p>
            </div>
            <div>
              <%= form.submit class:"btn", data: { action: "click->modal#close" } %>
            </div>
          <% end %>
        </div>
      </div>
      <form method="dialog" class="modal-backdrop">
        <button>close</button>
      </form>
    </dialog>
  </div>
<% end %>